/* =========================================
   Tailwind base
========================================= */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================
   Global tokens
========================================= */
:root {
  /* 上→中→下（lit.link系の抜け感） */
  --teal-top:    #0E4C48;  /* 上：やや暗い深緑 */
  --teal-mid:    #1E6D66;  /* 中：基調の青緑 */
  --teal-bottom: #86D2D8;  /* 下：明るい水色寄り */
}

/* =========================================
   Base element tweaks
========================================= */
html, body {
  margin: 0;
  padding: 0;
  background-color: theme("colors.background");
  color: theme("colors.foreground");
  font-family: "Noto Sans JP", system-ui, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a {
  @apply text-primary no-underline hover:no-underline transition-colors;
}

/* =========================================
   Custom utilities (purge-friendly)
========================================= */
@layer utilities {
  /* ===== HERO background：縦グラデ＋上部ハイライト ===== */
  .bg-hero-figma {
    background-image:
      /* 上部の光だまり */
      radial-gradient(
        900px 480px at 50% 0%,
        rgba(255,255,255,0.22) 0%,
        rgba(255,255,255,0.00) 55%
      ),
      /* 上→下の縦グラデーション */
      linear-gradient(
        180deg,
        var(--teal-top) 0%,
        var(--teal-mid) 48%,
        var(--teal-bottom) 100%
      );
    background-size: cover;
    background-position: center;
  }

  /* 周辺減光（弱め：抜け感優先／Figma寄り） */
  .hero-vignette-sm {
    box-shadow:
      inset 0 34px 120px rgba(0,0,0,0.16),
      inset 0 -28px 90px rgba(0,0,0,0.14);
  }

  /* 周辺減光（標準：深み優先／必要時のみ） */
  .hero-vignette {
    box-shadow:
      inset 0 50px 120px rgba(0,0,0,0.22),
      inset 0 -40px 120px rgba(0,0,0,0.18);
  }

  /* ガラス艶＋微粒ノイズ（背景に重ねる質感） */
  .hero-glass {
    position: relative;
    isolation: isolate; /* 擬似要素のブレンドを閉じ込める */
  }
  .hero-glass::before {
    content: "";
    position: absolute; inset: 0;
    pointer-events: none;
    background:
      /* 上からの艶 */
      linear-gradient(to bottom,
        rgba(255,255,255,0.28) 0%,
        rgba(255,255,255,0.10) 12%,
        rgba(255,255,255,0.00) 32%),
      /* 細い縦グロス */
      linear-gradient(90deg,
        rgba(255,255,255,0.10) 0%,
        rgba(255,255,255,0.00) 18%,
        rgba(255,255,255,0.00) 82%,
        rgba(255,255,255,0.08) 100%);
    mix-blend-mode: screen;
  }
  .hero-glass::after {
    content: "";
    position: absolute; inset: 0;
    pointer-events: none;
    opacity: .06; /* 強ければ下げる */
    background-image: url("data:image/svg+xml;utf8,\
      <svg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'>\
      <filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='2' stitchTiles='stitch'/><feColorMatrix type='saturate' values='0'/></filter>\
      <rect width='120' height='120' filter='url(%23n)' opacity='0.35'/></svg>");
    background-size: 240px 240px;
    mix-blend-mode: overlay;
  }

  /* 可読性ベール（必要時のみ子要素でON） */
  .hero-overlay-10 { background-color: rgba(0,0,0,.10); }
  .hero-overlay-15 { background-color: rgba(0,0,0,.15); }

  /* ===== Header glass（同系色・透け・スクロールで締まる） ===== */
  .header-safe { padding-top: env(safe-area-inset-top); }

  .header-glass {
    -webkit-backdrop-filter: saturate(140%) blur(10px);
    backdrop-filter: saturate(140%) blur(10px);
    background-image:
      linear-gradient(
        180deg,
        color-mix(in oklab, #0E4C48 85%, transparent) 0%,
        color-mix(in oklab, #1E6D66 85%, transparent) 60%,
        color-mix(in oklab, #86D2D8 85%, transparent) 100%
      );
    background-color: rgba(30,109,102,0.35); /* フォールバック */
    box-shadow:
      inset 0 1px 0 rgba(255,255,255,0.18),
      inset 0 -1px 0 rgba(0,0,0,0.12);
    border-bottom: 1px solid rgba(255,255,255,0.18);
    color: #fff;
  }

  .header-glass--scrolled {
    -webkit-backdrop-filter: saturate(150%) blur(12px);
    backdrop-filter: saturate(150%) blur(12px);
    background-color: rgba(30,109,102,0.60);
    box-shadow:
      inset 0 1px 0 rgba(255,255,255,0.14),
      0 6px 18px rgba(0,0,0,0.22);
    border-bottom-color: rgba(255,255,255,0.14);
  }
}
